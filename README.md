# alert_attack_on_UTM
It catures packets which are you want to alert, and literally alert with song. 



-----------한글------------

안랩의 UTM과 같은 곳에서 10초마다 패킷을 관제할 때, 특정 srcIP의 패킷이 검출 될 경우 
노래를 틀어 알려주는 소스코드입니다.

**** '브라우저 console'에서 실행합니다.****

코드를 실행하기 전 

// 요청할 URL, UTM에서 10초마다 새로고침하는 페이지 URL을 넣으면 됨, 네이버는 테스트용

let URL = 'https://www.naver.com/';

// 알람을 울릴 특정 IP주소, '환율'은 네이버에서 테스트할 때를 위한 용도

let attackArray = ['환율', 'value2', 'value3', 'etc...'];

// 쿠키 지속 시간, 초 단위

let COOKIE_TIME = 60;

// 찾을 주소 값을 갖고 있는 클래스 이름, 

let CLASS_NAME = ".stock_title"

여기의 코드 값들을 바꿔주시기 바랍니다.

그 이후 

'i)'에 해당하는 코드를 먼저 실행해 indexedDB를 만들고, 현재 코드를 실행한 페이지 맨 밑으로 내려 알림으로 쓸 노래파일을 업로드 후

'ii)'에 해당하는 코드를 실행하면, 여러분이 설정한 COOKIE_TIME에 맞춰서 노래를 틀어 알람을 합니다.


/*
****** 개발까지의 고생과 변경점들 ******

★문제 1
i) 공격 발생시 알람으로 노래를 틀어야하는 데, 로컬 파일에 직접 접근하는 것은 보안정책상 대부분의 브라우저에서 막혀있음
ii) URL을 통해 알람을 울리려 해도 CORS 문제에 직면
--
(해결법) 3주 소요
파일 업로드 요소 추가후, 업로드 요소를 실행하는 자바스크립트 실행 후 파일 업로드 후, IndexedDB에 저장함

★문제 2
IndexedDB에 노래 파일 업로드가 안됨
--
(해결법) 1일 소요
파일이 업로드 되면, 이진파일로 바꾸고 저장하기

★문제 3
특정 sip와 dip가 왔을 때 그것을 어떻게 공격이라 판단하고, 어떻게 일정 시간 내 딱 한번만 울리게 만들 것인가
--
(해결법) 7일 소요
UTM URL의 'body'에서 특정 


★문제 3
i)UTM 페이지에서 관제할 패킷들이 담긴 요소들을 어떻게 가져올 것인가 --> class를 이용한 요소값 분리
ii)막상 
--


★문제 2
IndexedDB에 노래 파일 업로드가 안됨
--


★문제 2
IndexedDB에 노래 파일 업로드가 안됨
--

*/


